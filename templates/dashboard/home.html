{% extends 'base.html' %}

{% block title %}ููุญุฉ ุงูุชุญูู - ููุตุฉ ุงููุณุงุจูุงุช ุงูุฑูุงุถูุฉ{% endblock %}

{% block content %}
<div class="card">
    <div class="header">
        <h1>๐ ููุญุฉ ุงูุชุญูู</h1>
        <h2>ุฅุญุตุงุฆูุงุช ุงูููุตุฉ</h2>
    </div>
    
    <!-- ุฅุญุตุงุฆูุงุช ุนุงูุฉ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
        <div style="background: #3498db; color: white; padding: 20px; border-radius: 10px; text-align: center;">
            <h3 style="margin: 0; font-size: 2em;">{{ total_competitions }}</h3>
            <p style="margin: 5px 0;">ุฅุฌูุงูู ุงููุณุงุจูุงุช</p>
        </div>
        
        <div style="background: #27ae60; color: white; padding: 20px; border-radius: 10px; text-align: center;">
            <h3 style="margin: 0; font-size: 2em;">{{ completed_competitions }}</h3>
            <p style="margin: 5px 0;">ูุณุงุจูุงุช ููุชููุฉ</p>
        </div>
        
        <div style="background: #e74c3c; color: white; padding: 20px; border-radius: 10px; text-align: center;">
            <h3 style="margin: 0; font-size: 2em;">{{ active_sessions }}</h3>
            <p style="margin: 5px 0;">ุฌูุณุงุช ูุดุทุฉ</p>
        </div>
        
        <div style="background: #f39c12; color: white; padding: 20px; border-radius: 10px; text-align: center;">
            <h3 style="margin: 0; font-size: 2em;">{{ average_score }}%</h3>
            <p style="margin: 5px 0;">ูุชูุณุท ุงููุชุงุฆุฌ</p>
        </div>
    </div>
    
    <!-- ุฅุญุตุงุฆูุงุช ุญุณุจ ุงููุณุชูู -->
    {% if grade_stats %}
    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h3 style="color: #2c3e50; margin-bottom: 15px;">๐ ุงูุฃุฏุงุก ุญุณุจ ุงููุณุชูู</h3>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px; text-align: right;">ุงููุณุชูู</th>
                        <th style="padding: 10px; text-align: center;">ุนุฏุฏ ุงููุณุงุจูุงุช</th>
                        <th style="padding: 10px; text-align: center;">ูุชูุณุท ุงููุชูุฌุฉ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in grade_stats %}
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;">{{ stat.grade_level }}</td>
                        <td style="padding: 10px; text-align: center;">{{ stat.count }}</td>
                        <td style="padding: 10px; text-align: center;">{{ stat.avg_score|floatformat:1 }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
    
    <!-- ุขุฎุฑ ุงููุณุงุจูุงุช -->
    {% if recent_competitions %}
    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h3 style="color: #2c3e50; margin-bottom: 15px;">๐ ุขุฎุฑ ุงููุณุงุจูุงุช</h3>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px; text-align: right;">ุงุณู ุงูุทุงูุจ</th>
                        <th style="padding: 10px; text-align: center;">ุงููุณุชูู</th>
                        <th style="padding: 10px; text-align: center;">ุงููุชูุฌุฉ</th>
                        <th style="padding: 10px; text-align: center;">ููุช ุงูุงูุชูุงุก</th>
                    </tr>
                </thead>
                <tbody>
                    {% for competition in recent_competitions %}
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;">{{ competition.student_name }}</td>
                        <td style="padding: 10px; text-align: center;">{{ competition.grade_level }}</td>
                        <td style="padding: 10px; text-align: center;">
                            <span style="background: {% if competition.score >= 80 %}#27ae60{% elif competition.score >= 60 %}#f39c12{% else %}#e74c3c{% endif %}; 
                                         color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">
                                {{ competition.score|floatformat:1 }}%
                            </span>
                        </td>
                        <td style="padding: 10px; text-align: center;">{{ competition.end_time|date:"d/m H:i" }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
    
    <!-- ุฃุฒุฑุงุฑ ุงูุนูู -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 30px 0;">
        <a href="/dashboard/analytics/" class="btn" style="text-align: center;">๐ ุงูุชุญูููุงุช</a>
        <a href="/dashboard/reports/" class="btn" style="text-align: center;">๐ ุงูุชูุงุฑูุฑ</a>
        <a href="/admin/" class="btn admin" style="text-align: center;">โ๏ธ ููุญุฉ ุงูุฅุฏุงุฑุฉ</a>
    </div>
    
    <div class="nav-links">
        <a href="/accounts/dashboard/">๐จโ๐ซ ููุญุฉ ุงููุนูู</a>
        <a href="/">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
    </div>
</div>
{% endblock %}
