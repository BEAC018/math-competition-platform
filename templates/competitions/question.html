{% extends 'base.html' %}

{% block title %}Ø³Ø¤Ø§Ù„ {{ question_number }} - Ù…Ù†ØµØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©{% endblock %}

{% block content %}
<div class="card">
    <div class="header">
        <h1>ðŸ§® Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… {{ question_number }}</h1>
        <div style="background: #3498db; color: white; padding: 10px; border-radius: 5px; display: inline-block;">
            {{ question_number }} Ù…Ù† {{ total_questions }}
        </div>
    </div>
    
    <div style="text-align: center; margin: 40px 0;">
        <div style="background: #f8f9fa; padding: 40px; border-radius: 15px; margin-bottom: 30px;">
            <h2 style="font-size: 3em; color: #2c3e50; margin-bottom: 20px;">
                {{ question.text }} = ØŸ
            </h2>
        </div>
        
        <form id="answerForm" method="post" action="/student/submit/">
            {% csrf_token %}
            <input type="hidden" name="question_text" value="{{ question.text }}">
            <input type="hidden" name="correct_answer" value="{{ question.answer }}">
            
            <div class="form-group" style="max-width: 300px; margin: 0 auto;">
                <label for="student_answer" style="font-size: 1.2em;">Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ:</label>
                <input type="number" id="student_answer" name="student_answer" 
                       required style="font-size: 1.5em; text-align: center;" 
                       placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©" autofocus>
            </div>
            
            <button type="submit" class="btn btn-success" style="font-size: 1.2em; margin-top: 20px;">
                âœ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            </button>
        </form>
    </div>
    
    <div style="text-align: center; color: #7f8c8d;">
        <p>Ø§Ù„Ø·Ø§Ù„Ø¨: {{ student_name }}</p>
    </div>
</div>

<script>
document.getElementById('answerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    fetch('/student/submit/', {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.correct) {
            alert('ðŸŽ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª');
        } else {
            alert('âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ' + data.correct_answer);
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
        setTimeout(() => {
            window.location.href = '/student/question/';
        }, 2000);
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    });
});
</script>
{% endblock %}
