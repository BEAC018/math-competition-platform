#!/usr/bin/env bash
# Build script for Render deployment
# Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Render

set -o errexit  # Exit on error

echo "ğŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡..."
echo "Starting build process..."

echo "ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª..."
echo "Installing requirements..."
pip install -r requirements.txt

echo "ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©..."
echo "Creating static directories..."
mkdir -p staticfiles
mkdir -p static

echo "ğŸ“ Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©..."
echo "Collecting static files..."
python manage.py collectstatic --noinput --clear || echo "Static files collection failed, continuing..."

echo "ğŸ“Š ØªØ·Ø¨ÙŠÙ‚ Ù‡Ø¬Ø±Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."
echo "Applying database migrations..."
python manage.py migrate --noinput

echo "âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!"
echo "Build completed successfully!"
